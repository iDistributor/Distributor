## 0704 СПР Прайс-листы производителя
*Бренд-менеджер*, *НОП*

| Тип компонента | Период дейтвия | Журнал документов | Редактирование
|---------------|------------|----------------------------------------
|справочник| определяется пользователем | реализован |отдельная форма
Этот компонент выступает в роли головного инструмента в механизме ценообразования на всех участках цепочки
 движения товара **Производитель -> Дистрибьютор -> Клиент**. С его помощью системе задаются входные цены
 от Производителя[^1], которые задекларированы в спецификациях, доп.соглашениях и прочих приложениях к дистрибьюторскому
 договору между Производителем и Дистрибьютором, и механизмы возможных корректировок этих цен
 (бонус, штраф, маркетинг и пр.). Также в этом справочнике создается сетка отпускных цен для клиентов
 дистрибьютора, которая хранится и активно используется системой для формирования расходных документов,
  бухгалтерских проводок и построения множества отчетов.



### Руководство пользователя.

Документ прайс-лист может создаваться и редактироваться на **Центральном офисе (ЦО)** с последующей синхронизацией на филиалы,
либо на филиале с признаком ЦО. Важно понимать что в один период времени, на одном филиале может существовать только один
прайс-лист. Система всегда будет проверять на уникальность создаваемого или редактируемого документа. И в случае ошибки выдавать
сообщение в диалоговом окне.

Все документы собраны в журнале, в котором содержится основная справочная информация по каждому прайс-листу. Такая как: период действия, производитель, комментарий, а в случае филиальной структуры - принадлежность к филиалу.


Новый документ создается в журнале документов по одному из сценариев:
1. Добавить (**Ins**) - создает полностью пустой документ. Открывается пустая форма для редактирования, и пользователю необходимо вручную заполнять все поля.
2. Создать прайс-лист на основании - создает документ на основании выбранного в журнале документа-исходника [^4], и все поля нового документа, кроме примечания и дат, будут заполнены автоматически на основании исходного прайс-листа.

Любой сценарий приводит к открытию формы редактирования[^2], которую условно можно разбить на 3 части:
1. Шапочная часть, ([рис.1](./media/image1.png "рис.1")) - здесь задаются ключевые параметры, такие как: Производитель, Период Действия, Филиалы (для филиальной структуры) и пр.  
2. Условия расчета отпускных и приходных цен (рис.2) - табличная часть, в которой задаются механизмы расчета, приходных и отпускных цен, с учетом всевозможных скидок и компенсаций.
3. Таблица Товары (рис.3). - в этой таблице хранятся как уже рассчитанные цены по каждому **ТМЦ**, так и величины, участвующие в расчете и требующие заполнение пользователем.




#### Шапочная часть
*рис.1*
![рис.1](./media/image1.png "рис.1")



- Производитель - обязательно для заполнения, выбирается из справочника **Производители**, служит для подбора **ТМЦ**, и **Групп ценообразования**. При заполнении этого поля, система наполняет таблицу **Товары** всеми **ТМЦ** в статусе **Активный**[^5]
- Период действия - из календарной формы выбираются даты действия прайс-листа, таким образом задается период действия приходных и отпускных цен. В случае приходных все цены будут контролироваться по дате прихода, в случае расходных накладных по дате документа **Расходная Накладная (РН)**
  - с (начало действия) - обязательно для заполнения, пользователю необходимо задать с какого числа начинают действовать цены.[^3]
  - по (окончание действия) - необязательно для заполнения, пользователь в большинстве случаев не знает до какого периода будут действовать цены текущего
  прайс-листа, поэтому создает прайс-лист с открытым периодом действия.
- Округление РЦП - определяет параметр округления для расчета **РЦП**. Округление производится до второго знака после запятой и может быть:
 - Математически - стандартное округление к ближашему 2-му знаку после запятой
 - В большую сторону - если обнуляемые знаки не равны нулю, предшествующий знак увеличивают на единицу.
 https://ru.wikipedia.org/wiki/Округление
- Тип цены для сотрудника - задается по какой категории отпускной цены будет отпускаться товар сотрудникам компании. Это параметр используется при формировании документа **РН СОТ** в компоненте **2220 ЖД Накладная на сотрудника**
- Комментарий к прайс-листу - текстовое поле, заполняется вручную несет несет смысловую нагрузку, какие обстоятельства сподвигли создать новый документ.
- Переподписать спецификации - признак, который определяет запускать **обработку**, закрывающую актуальность действующих **спецификаций**, в которых есть товары выбранного **производителя**.[^6]

*рис.2*
<img src="./media/image2.png">

*рис.3*
  <img src="./media/image3.png">


[^1]: под термином **Производитель** в контексте всей этой книги подразумевается поставщик дистрибьютора. Им может быть не только производитель какого либо товара, но также импортер, другой дистрибьютор (дистрибьютор поставляет товар субдистрибьютору), и вообще любой поставщик, с которым дистрибьютор заключил договор поставки в качестве покупателя.

[^2]: под термином **редактирование** подразумевается также и **создание** нового документа, так как в большинстве компонентов программы и создание и редактирование документа происходит в одной и той же форме.

[^3]: период действия цен для расходных накладных будет определятся по **дате документа** **РН**

[^4]: в большинстве случаев это предшествующий прайс-лист того же **производителя**

[^5]: перенаполнение таблиц также происходит и при редактировании действующего прайс-листа

[^6]: при сохранении прайса, для всех спецификаций в статусе **Действительный**, с датой **действительна по** не указанной или больше  **дата начала действия прайс-листа - 1** и в которых есть товары **производителя**, обновляется дата **действительна по** согласно формуле: **действителен по = дата начала действия прайс-листа - 1**. Фактически, если прайс-лист начинает действовать с сегодняшнего дня, то действующие спецификации производителя закрываются вчерашним днем.
